<!DOCTYPE html>
<html>
<head>
  <title>Login - Bet Luck & Earn</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js"></script>
  <script src="firebase.js"></script>
</head>
<body>

<div class="header">ğŸ” Login with OTP</div>

<div style="padding:25px;text-align:center;">
  <input id="phone" placeholder="+91XXXXXXXXXX">
  <div id="recaptcha" style="margin:15px 0;"></div>
  <button onclick="sendOTP()">Send OTP</button>

  <br><br>

  <input id="otp" placeholder="Enter OTP">
  <button onclick="verifyOTP()">Verify & Login</button>
</div>

<script>
window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(
  'recaptcha',
  { size: 'normal' }
);

let confirmationResult;

function sendOTP(){
  const phone = document.getElementById("phone").value;
  firebase.auth().signInWithPhoneNumber(phone, window.recaptchaVerifier)
  .then(res=>{
    confirmationResult = res;
    alert("OTP Sent");
  })
  .catch(err=>alert(err.message));
}

function verifyOTP(){
  const otp = document.getElementById("otp").value;
  confirmationResult.confirm(otp)
  .then(()=>window.location.href="dashboard.html")
  .catch(()=>alert("Wrong OTP"));
}
</script>

</body>
</html>
