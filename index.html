<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bet Luck & Earn</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#0f5132,#198754);
  color:white;
  text-align:center;
}
.container{padding:20px;}
button{
  padding:12px 18px;
  margin:6px;
  border:none;
  border-radius:8px;
  background:#20c997;
  color:black;
  font-weight:bold;
}
.hidden{display:none;}
.card{
  background:rgba(255,255,255,0.1);
  padding:15px;
  border-radius:10px;
  margin:10px 0;
}
input{
  padding:10px;
  width:80%;
  margin:6px;
  border-radius:6px;
  border:none;
}
</style>
</head>

<body>
<div class="container">

<h2>ðŸŽ¯ Bet Luck & Earn</h2>

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h3>Login</h3>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <br>
  <button onclick="login()">Login</button>
  <button onclick="signup()">Signup</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">
  <h3>Wallet: â‚¹<span id="wallet">0</span></h3>

  <div class="card">
    <h4>Skill Contests</h4>
    <button onclick="startQuiz(5)">â‚¹5 Contest</button>
    <button onclick="startQuiz(10)">â‚¹10 Contest</button>
    <button onclick="startQuiz(50)">â‚¹50 Contest</button>
    <button onclick="startQuiz(100)">â‚¹100 Contest</button>
  </div>

  <div class="card">
    <button onclick="addMoney()">âž• Add Money (Demo)</button>
    <button onclick="logout()">Logout</button>
  </div>
</div>

<!-- QUIZ -->
<div id="quizBox" class="hidden card">
  <h3 id="question"></h3>
  <input id="answer" placeholder="Your answer">
  <br>
  <button onclick="submitAnswer()">Submit</button>
</div>

</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAmJtO_ucih8U9KBf4tgFDM...",
  authDomain: "bet-luck-earn.firebaseapp.com",
  projectId: "bet-luck-earn",
  storageBucket: "bet-luck-earn.appspot.com",
  messagingSenderId: "1029867508970",
  appId: "1:1029867508970:web:72ca7c13b2004927d33393",
  measurementId: "G-7FHXTMS67M"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

let correctAnswer = 0;
let wallet = 0;

// AUTH
function signup(){
  auth.createUserWithEmailAndPassword(
    email.value,password.value
  );
}

function login(){
  auth.signInWithEmailAndPassword(
    email.value,password.value
  );
}

function logout(){
  auth.signOut();
}

// STATE
auth.onAuthStateChanged(user=>{
  if(user){
    loginBox.classList.add("hidden");
    dashboard.classList.remove("hidden");
  }else{
    loginBox.classList.remove("hidden");
    dashboard.classList.add("hidden");
  }
});

// WALLET
function addMoney(){
  wallet += 10;
  document.getElementById("wallet").innerText = wallet;
}

// QUIZ
function startQuiz(amount){
  if(wallet < amount){
    alert("Not enough balance");
    return;
  }
  wallet -= amount;
  document.getElementById("wallet").innerText = wallet;

  let a = Math.floor(Math.random()*10);
  let b = Math.floor(Math.random()*10);
  correctAnswer = a + b;

  question.innerText = `Solve: ${a} + ${b}`;
  quizBox.classList.remove("hidden");
}

function submitAnswer(){
  let ans = parseInt(answer.value);
  if(ans === correctAnswer){
    alert("Correct! You won ðŸŽ‰");
    wallet += 20;
    document.getElementById("wallet").innerText = wallet;
  }else{
    alert("Wrong answer âŒ");
  }
  quizBox.classList.add("hidden");
  answer.value="";
}
</script>

</body>
</html>
